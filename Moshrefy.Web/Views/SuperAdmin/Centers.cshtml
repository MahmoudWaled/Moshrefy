@model PaginatedResult<CenterVM>

@{
    ViewData["Title"] = "Centers Management";
}

<!-- Page Header -->
<div class="page-header-modern">
    <div class="row g-2 align-items-center">
        <div class="col">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb-modern">
                    <li class="breadcrumb-item">
                        <a asp-controller="SuperAdmin" asp-action="Index"><i class="ti ti-home"></i> Dashboard</a>
                        <i class="ti ti-chevron-right breadcrumb-separator ms-2"></i>
                    </li>
                    <li class="breadcrumb-item active" aria-current="page">Centers</li>
                </ol>
            </nav>
            <h2 class="page-title"><i class="ti ti-building"></i> Centers Management</h2>
        </div>
        <div class="col-auto ms-auto d-print-none">
            <div class="btn-list">
                <a asp-action="AdvancedSearchCenters" class="btn d-none d-sm-inline-block">
                    <i class="ti ti-search icon"></i> Advanced Search
                </a>
                <a asp-action="CreateCenter" class="btn btn-action-create d-none d-sm-inline-block">
                    <i class="ti ti-plus icon"></i> Create New Center
                </a>
                <a asp-action="CreateCenter" class="btn btn-action-create d-sm-none btn-icon">
                    <i class="ti ti-plus icon"></i>
                </a>
            </div>
        </div>
    </div>
</div>


@Html.AntiForgeryToken()

<!-- Page body -->
<div class="page-body">
    <div class="container-xl">
        <div class="row row-deck row-cards">
            <div class="col-12">
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title" id="cardTitle">All Centers</h3>
                        <div class="ms-auto d-flex align-items-center gap-3">
                            <!-- Page Size Dropdown -->
                            <div class="d-flex align-items-center gap-2">
                                <label class="form-label m-0 text-muted">Show</label>
                                <select class="form-select form-select-sm" style="width: auto;" id="pageSizeSelect"
                                        onchange="window.location.href='@Url.Action("Centers", "SuperAdmin")?PageNumber=1&PageSize=' + this.value">
                                    @foreach (var size in new[] { 10, 20, 30, 50, 100 })
                                    {
                                        if (Model.PageSize == size)
                                        {
                                            <option value="@size" selected>@size</option>
                                        }
                                        else
                                        {
                                            <option value="@size">@size</option>
                                        }
                                    }
                                </select>
                                <label class="form-label m-0 text-muted">entries</label>
                            </div>

                            <!-- Filter Buttons -->
                            <div class="btn-group" role="group">
                                <button type="button" class="btn btn-sm" id="filterAll">
                                    <i class="ti ti-list icon"></i> All
                                </button>
                                <button type="button" class="btn btn-sm" id="filterActive">
                                    Active
                                </button>
                                <button type="button" class="btn btn-sm" id="filterInactive">
                                    Inactive
                                </button>
                                <button type="button" class="btn btn-sm btn-action-delete" id="filterDeleted">
                                    <i class="ti ti-trash icon"></i> Deleted
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="table-responsive">
                            <table class="table table-vcenter table-hover" id="centersTable">
                                <thead>
                                    <tr>
                                        <th>#</th>
                                        <th>@Html.DisplayNameFor(Model => Model.Items.First().Name)</th>
                                        <th>@Html.DisplayNameFor(Model => Model.Items.First().Address)</th>
                                        <th>@Html.DisplayNameFor(Model => Model.Items.First().IsActive)</th>
                                        <th>@Html.DisplayNameFor(Model => Model.Items.First().IsDeleted)</th>
                                        <th>@Html.DisplayNameFor(Model => Model.Items.First().CreatedAt)</th>
                                        <th class="w-1">Actions</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    @{
                                        var rowNumber = ((Model.PageNumber - 1) * Model.PageSize) + 1;
                                    }
                                    @foreach (var center in Model.Items)
                                    {
                                        <tr>
                                            <td>@(rowNumber++)</td>
                                            <td>@center.Name</td>
                                            <td>@center.Address</td>
                                            <td class="@(center.IsActive ? "" : "badge bg-state-inactive")">
                                                @(center.IsActive ? "Active" : "Inactive")
                                            </td>
                                            <td>@(center.IsDeleted ? "Deleted" : "")</td>
                                            <td>@center.CreatedAt.ToString("yyyy-MM-dd")</td>
                                            <td>
                                                <a asp-action="CenterDetails" asp-route-centerId="@center.Id" class="btn btn-sm">View</a>
                                            </td>
                                        </tr>
                                    }
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Pagination and PageSize dropdown show option -->
                    @await Html.PartialAsync("_Pagination", new Moshrefy.Web.Models.Common.PaginationVM
                    {
                        PageNumber = Model.PageNumber,
                        PageSize = Model.PageSize,
                        TotalCount = Model.TotalCount,
                        ActionName = "Centers",
                        ControllerName = "SuperAdmin",
                        ItemName = "centers",
                        ShowPageSizeDropdown = false
                    })
                </div>
            </div>
        </div>
    </div>
</div>


