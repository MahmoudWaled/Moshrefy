@model Moshrefy.Web.Models.Statistics.SystemStatisticsVM
@{
    ViewData["Title"] = "Dashboard";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!-- Content Header -->
<section class="content-header">
    <div class="container-fluid">
        <div class="row mb-2">
            <div class="col-sm-6">
                <h1>
                    <i class="fas fa-tachometer-alt"></i> Super Admin Dashboard
                </h1>
            </div>
            <div class="col-sm-6">
                <ol class="breadcrumb float-sm-right">
                    <li class="breadcrumb-item active">Dashboard</li>
                </ol>
            </div>
        </div>
    </div>
</section>

<!-- Main content -->
<section class="content">
    <div class="container-fluid">
        <!-- Info boxes -->
        <div class="row">
            <!-- Total Centers Widget -->
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                    <span class="info-box-icon bg-info elevation-1">
                        <i class="fas fa-building"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Total Centers</span>
                        <span class="info-box-number">
                            @Model.TotalCenters
                        </span>
                    </div>
                </div>
            </div>

            <!-- Active Centers Widget -->
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box mb-3">
                    <span class="info-box-icon bg-success elevation-1">
                        <i class="fas fa-check-circle"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Active Centers</span>
                        <span class="info-box-number">@Model.ActiveCenters</span>
                    </div>
                </div>
            </div>

            <!-- Total Users Widget -->
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box mb-3">
                    <span class="info-box-icon bg-warning elevation-1">
                        <i class="fas fa-users"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Total Users</span>
                        <span class="info-box-number">@Model.TotalUsers</span>
                    </div>
                </div>
            </div>

            <!-- Active Users Widget -->
            <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box mb-3">
                    <span class="info-box-icon bg-primary elevation-1">
                        <i class="fas fa-user-check"></i>
                    </span>
                    <div class="info-box-content">
                        <span class="info-box-text">Active Users</span>
                        <span class="info-box-number">@Model.ActiveUsers</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Statistics Cards Row -->
        <div class="row">
            <!-- Centers Overview Card -->
            <div class="col-lg-6">
                <div class="card card-primary card-outline">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-building mr-2"></i>
                            Centers Overview
                        </h3>
                        <div class="card-tools">
                            <a asp-action="Centers" class="btn btn-tool btn-sm">
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-6">
                                <div class="description-block border-right">
                                    <span class="description-percentage text-success">
                                        <i class="fas fa-check"></i> 
                                        @if (Model.TotalCenters > 0)
                                        {
                                            <text>@(Math.Round((double)Model.ActiveCenters / Model.TotalCenters * 100, 1))%</text>
                                        }
                                        else
                                        {
                                            @:0%
                                        }
                                    </span>
                                    <h5 class="description-header">@Model.ActiveCenters</h5>
                                    <span class="description-text">Active Centers</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="description-block">
                                    <span class="description-percentage text-danger">
                                        <i class="fas fa-times"></i>
                                        @if (Model.TotalCenters > 0)
                                        {
                                            <text>@(Math.Round((double)Model.InactiveCenters / Model.TotalCenters * 100, 1))%</text>
                                        }
                                        else
                                        {
                                            @:0%
                                        }
                                    </span>
                                    <h5 class="description-header">@Model.InactiveCenters</h5>
                                    <span class="description-text">Inactive Centers</span>
                                </div>
                            </div>
                        </div>
                        <div class="progress mt-3">
                            @{
                                var activePercentage = Model.TotalCenters > 0 
                                    ? (double)Model.ActiveCenters / Model.TotalCenters * 100 
                                    : 0;
                            }
                            <div class="progress-bar bg-success" role="progressbar" 
                                 style="width: @activePercentage%"
                                 aria-valuenow="@activePercentage" aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                    </div>
                    <div class="card-footer text-center">
                        <a asp-action="Centers" class="btn btn-sm btn-primary">
                            <i class="fas fa-eye"></i> View All Centers
                        </a>
                        <a asp-action="CreateCenter" class="btn btn-sm btn-success">
                            <i class="fas fa-plus"></i> Create New Center
                        </a>
                    </div>
                </div>
            </div>

            <!-- Users Overview Card -->
            <div class="col-lg-6">
                <div class="card card-info card-outline">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-users mr-2"></i>
                            Users Overview
                        </h3>
                        <div class="card-tools">
                            <a asp-controller="User" asp-action="Index" class="btn btn-tool btn-sm">
                                <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-6">
                                <div class="description-block border-right">
                                    <span class="description-percentage text-primary">
                                        <i class="fas fa-user-check"></i>
                                        @if (Model.TotalUsers > 0)
                                        {
                                            <text>@(Math.Round((double)Model.ActiveUsers / Model.TotalUsers * 100, 1))%</text>
                                        }
                                        else
                                        {
                                            @:0%
                                        }
                                    </span>
                                    <h5 class="description-header">@Model.ActiveUsers</h5>
                                    <span class="description-text">Active Users</span>
                                </div>
                            </div>
                            <div class="col-6">
                                <div class="description-block">
                                    <span class="description-percentage text-warning">
                                        <i class="fas fa-user-times"></i>
                                        @if (Model.TotalUsers > 0)
                                        {
                                            <text>@(Math.Round((double)Model.InactiveUsers / Model.TotalUsers * 100, 1))%</text>
                                        }
                                        else
                                        {
                                            @:0%
                                        }
                                    </span>
                                    <h5 class="description-header">@Model.InactiveUsers</h5>
                                    <span class="description-text">Inactive Users</span>
                                </div>
                            </div>
                        </div>
                        <div class="progress mt-3">
                            @{
                                var activeUsersPercentage = Model.TotalUsers > 0 
                                    ? (double)Model.ActiveUsers / Model.TotalUsers * 100 
                                    : 0;
                            }
                            <div class="progress-bar bg-primary" role="progressbar" 
                                 style="width: @activeUsersPercentage%"
                                 aria-valuenow="@activeUsersPercentage" aria-valuemin="0" aria-valuemax="100">
                            </div>
                        </div>
                    </div>
                    <div class="card-footer text-center">
                        <a  asp-action="Users" class="btn btn-sm btn-info">
                            <i class="fas fa-eye"></i> View All Users
                        </a>
                        <a asp-action="CreateUserForCenter" class="btn btn-sm btn-success">
                            <i class="fas fa-plus"></i> Create New User
                        </a>
                        <a asp-action="CreateCenterAdmin" class="btn btn-sm btn-warning ">
                            <i class="fas fa-plus"></i> Create New Admin
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions Row -->
        <div class="row">
            <div class="col-12">
                <div class="card card-dark">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-bolt mr-2"></i>
                            Quick Actions
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3 col-sm-6">
                                <div class="small-box bg-gradient-primary">
                                    <div class="inner">
                                        <h4><i class="fas fa-building"></i></h4>
                                        <p>Manage Centers</p>
                                    </div>
                                    <div class="icon">
                                        <i class="fas fa-building"></i>
                                    </div>
                                    <a asp-action="Centers" class="small-box-footer">
                                        Go to Centers <i class="fas fa-arrow-circle-right"></i>
                                    </a>
                                </div>
                            </div>

                            <div class="col-md-3 col-sm-6">
                                <div class="small-box bg-gradient-success">
                                    <div class="inner">
                                        <h4><i class="fas fa-plus-circle"></i></h4>
                                        <p>Create Center</p>
                                    </div>
                                    <div class="icon">
                                        <i class="fas fa-plus-circle"></i>
                                    </div>
                                    <a asp-action="CreateCenter" class="small-box-footer">
                                        Create New <i class="fas fa-arrow-circle-right"></i>
                                    </a>
                                </div>
                            </div>

                            <div class="col-md-3 col-sm-6">
                                <div class="small-box bg-gradient-info">
                                    <div class="inner">
                                        <h4><i class="fas fa-users-cog"></i></h4>
                                        <p>User Management</p>
                                    </div>
                                    <div class="icon">
                                        <i class="fas fa-users-cog"></i>
                                    </div>
                                    <a asp-controller="User" asp-action="Index" class="small-box-footer">
                                        Manage Users <i class="fas fa-arrow-circle-right"></i>
                                    </a>
                                </div>
                            </div>

                            <div class="col-md-3 col-sm-6">
                                <div class="small-box bg-gradient-warning">
                                    <div class="inner">
                                        <h4><i class="fas fa-cogs"></i></h4>
                                        <p>System Settings</p>
                                    </div>
                                    <div class="icon">
                                        <i class="fas fa-cogs"></i>
                                    </div>
                                    <a asp-controller="Settings" asp-action="Index" class="small-box-footer">
                                        Configure <i class="fas fa-arrow-circle-right"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- System Status Row -->
        <div class="row">
            <div class="col-12">
                <div class="card card-success card-outline">
                    <div class="card-header">
                        <h3 class="card-title">
                            <i class="fas fa-info-circle mr-2"></i>
                            System Status
                        </h3>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="callout callout-info">
                                    <h5><i class="fas fa-building"></i> Centers Status</h5>
                                    <p>
                                        You have <strong>@Model.TotalCenters</strong> center(s) in the system.
                                        @if (Model.InactiveCenters > 0)
                                        {
                                            <br />
                                            <span class="text-warning">
                                                <i class="fas fa-exclamation-triangle"></i>
                                                @Model.InactiveCenters center(s) are currently inactive.
                                            </span>
                                        }
                                    </p>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="callout callout-success">
                                    <h5><i class="fas fa-users"></i> Users Status</h5>
                                    <p>
                                        System has <strong>@Model.TotalUsers</strong> user(s) registered.
                                        @if (Model.InactiveUsers > 0)
                                        {
                                            <br />
                                            <span class="text-warning">
                                                <i class="fas fa-exclamation-triangle"></i>
                                                @Model.InactiveUsers user(s) are currently inactive.
                                            </span>
                                        }
                                    </p>
                                </div>
                            </div>

                            <div class="col-md-4">
                                <div class="callout callout-warning">
                                    <h5><i class="fas fa-chart-line"></i> Activity Overview</h5>
                                    <p>
                                        <strong>@Model.ActiveCenters</strong> active center(s) with 
                                        <strong>@Model.ActiveUsers</strong> active user(s).
                                        <br />
                                        System is running smoothly.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
